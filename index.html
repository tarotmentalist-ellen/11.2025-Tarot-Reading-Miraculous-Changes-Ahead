import React, { useState } from 'react';
import { Sparkles, Heart, Moon, Sun } from 'lucide-react';

const TarotFortune = () => {
  const [selectedCard, setSelectedCard] = useState(null);
  const [showResult, setShowResult] = useState(false);
  
  // â­ ì—¬ê¸°ì— ì¹´ì¹´ì˜¤ì±„ë„ ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”!
  const KAKAO_CHANNEL_LINK = "https://pf.kakao.com/_your_channel_id";

  // 78ì¥ íƒ€ë¡œì¹´ë“œ í’€
  const tarotDeck = [
    // ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜
    { name: 'ë°”ë³´', emoji: 'ğŸ­', message: 'ìƒˆë¡œìš´ ì‹œì‘ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´. ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ë„ì „í•´ë´.', keyword: 'ì‹œì‘' },
    { name: 'ë§ˆë²•ì‚¬', emoji: 'âœ¨', message: 'ë„¤ê°€ ê°€ì§„ ëŠ¥ë ¥ì„ 100% ë°œíœ˜í•  íƒ€ì´ë°ì´ì•¼. ìì‹ ê° ê°€ì ¸.', keyword: 'ëŠ¥ë ¥' },
    { name: 'ì—¬ì‚¬ì œ', emoji: 'ğŸŒ™', message: 'ì§ê°ì„ ë¯¿ì–´. ë„¤ ë‚´ë©´ì˜ ëª©ì†Œë¦¬ê°€ ì •ë‹µì„ ì•Œê³  ìˆì–´.', keyword: 'ì§ê°' },
    { name: 'ì—¬í™©ì œ', emoji: 'ğŸ‘‘', message: 'í’ìš”ì™€ ì•ˆì •ì´ ì°¾ì•„ì™€. ë°›ì„ ì¤€ë¹„ í•´.', keyword: 'í’ìš”' },
    { name: 'í™©ì œ', emoji: 'âš”ï¸', message: 'ê³„íšëŒ€ë¡œ ì‹¤í–‰í•  ë•Œì•¼. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•´.', keyword: 'ì‹¤í–‰' },
    { name: 'êµí™©', emoji: 'ğŸ“¿', message: 'ì¡°ì–¸ì„ êµ¬í•´ë´. ì¢‹ì€ ë©˜í† ê°€ ë‚˜íƒ€ë‚  ê±°ì•¼.', keyword: 'ì¡°ì–¸' },
    { name: 'ì—°ì¸', emoji: 'ğŸ’•', message: 'ì¤‘ìš”í•œ ì„ íƒì˜ ìˆœê°„ì´ì•¼. ë§ˆìŒ ê°€ëŠ” ëŒ€ë¡œ ê²°ì •í•´.', keyword: 'ì„ íƒ' },
    { name: 'ì „ì°¨', emoji: 'ğŸ†', message: 'ìŠ¹ë¦¬ê°€ ëˆˆì•ì´ì•¼. ëê¹Œì§€ ë°€ê³  ë‚˜ê°€.', keyword: 'ìŠ¹ë¦¬' },
    { name: 'í˜', emoji: 'ğŸ’ª', message: 'ë¶€ë“œëŸ¬ìš´ í˜ìœ¼ë¡œ ì´ê²¨ë‚´. ì¸ë‚´ì‹¬ì´ ë‹µì´ì•¼.', keyword: 'ì¸ë‚´' },
    { name: 'ì€ë‘”ì', emoji: 'ğŸ•¯ï¸', message: 'í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•´. ë‚´ë©´ì„ ë“¤ì—¬ë‹¤ë´.', keyword: 'ì„±ì°°' },
    { name: 'ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´', emoji: 'ğŸ¡', message: 'ìš´ì´ ìƒìŠ¹í•˜ê³  ìˆì–´. ê¸ì •ì ì¸ ë³€í™”ê°€ ì™€.', keyword: 'ë³€í™”' },
    { name: 'ì •ì˜', emoji: 'âš–ï¸', message: 'ê³µì •í•œ ê²°ê³¼ê°€ ë‚˜ì˜¬ ê±°ì•¼. ì •ì§í•˜ê²Œ í–‰ë™í•´.', keyword: 'ê³µì •' },
    { name: 'ê±°ê¾¸ë¡œ ë§¤ë‹¬ë¦° ì‚¬ëŒ', emoji: 'ğŸŒŠ', message: 'ê´€ì ì„ ë°”ê¿”ë´. ìƒˆë¡œìš´ ì‹œê°ì´ ë‹µì„ ì¤„ ê±°ì•¼.', keyword: 'ì „í™˜' },
    { name: 'ì£½ìŒ', emoji: 'ğŸ¦‹', message: 'ëì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ì‹œì‘ì´ì•¼. ë³€í™”ë¥¼ ë°›ì•„ë“¤ì—¬.', keyword: 'ì¬íƒ„ìƒ' },
    { name: 'ì ˆì œ', emoji: 'ğŸ§˜', message: 'ê· í˜•ì„ ì°¾ì•„. ì¤‘ë„ê°€ ìµœì„ ì˜ ê¸¸ì´ì•¼.', keyword: 'ê· í˜•' },
    { name: 'ì•…ë§ˆ', emoji: 'â›“ï¸', message: 'ì§‘ì°©ì„ ë†“ì•„. ììœ ë¡œì›Œì§ˆ ì‹œê°„ì´ì•¼.', keyword: 'í•´ë°©' },
    { name: 'íƒ‘', emoji: 'âš¡', message: 'ê°‘ì‘ìŠ¤ëŸ° ë³€í™”ê°€ ì™€. í•˜ì§€ë§Œ ë” ë‚˜ì€ ë°©í–¥ì´ì•¼.', keyword: 'íŒŒê´´' },
    { name: 'ë³„', emoji: 'â­', message: 'í¬ë§ì„ ê°€ì ¸. ë„¤ ê¿ˆì€ ì´ë¤„ì§ˆ ê±°ì•¼.', keyword: 'í¬ë§' },
    { name: 'ë‹¬', emoji: 'ğŸŒ™', message: 'ë¶ˆì•ˆí•´í•˜ì§€ ë§ˆ. ê³§ ì§„ì‹¤ì´ ë“œëŸ¬ë‚  ê±°ì•¼.', keyword: 'ì§„ì‹¤' },
    { name: 'íƒœì–‘', emoji: 'â˜€ï¸', message: 'í–‰ë³µê³¼ ì„±ê³µì´ í•¨ê»˜ ì™€. ë°ì€ ì—ë„ˆì§€ë¥¼ ë°›ì•„.', keyword: 'ì„±ê³µ' },
    { name: 'ì‹¬íŒ', emoji: 'ğŸ“¯', message: 'ê³¼ê±°ë¥¼ ì •ë¦¬í•  ë•Œì•¼. ìƒˆ ì¶œë°œ ì¤€ë¹„í•´.', keyword: 'ì •ë¦¬' },
    { name: 'ì„¸ê³„', emoji: 'ğŸŒ', message: 'ì™„ì„±ì˜ ìˆœê°„ì´ì•¼. ëª¨ë“  ê²Œ ì œìë¦¬ë¥¼ ì°¾ì•„ê°€.', keyword: 'ì™„ì„±' },
    // ì»µ
    { name: 'ì—ì´ìŠ¤ ì˜¤ë¸Œ ì»µ', emoji: 'ğŸ’–', message: 'ìƒˆë¡œìš´ ì‚¬ë‘ì´ë‚˜ ê°ì •ì´ ì‹œì‘ë¼. ë§ˆìŒì„ ì—´ì–´.', keyword: 'ì‚¬ë‘ì‹œì‘' },
    { name: 'ì»µ2', emoji: 'ğŸ’‘', message: 'ê´€ê³„ê°€ ê¹Šì–´ì ¸. ì†Œí†µì„ ë” í•´ë´.', keyword: 'ì—°ê²°' },
    { name: 'ì»µ3', emoji: 'ğŸ‰', message: 'ì¶•í•˜í•  ì¼ì´ ìƒê²¨. ì£¼ë³€ê³¼ ê¸°ì¨ì„ ë‚˜ëˆ .', keyword: 'ì¶•í•˜' },
    { name: 'ì»µ6', emoji: 'ğŸ’­', message: 'ê·¸ë¦¬ìš´ ì‚¬ëŒì´ ë– ì˜¬ë¼. ì¢‹ì€ ì¶”ì–µì„ íšŒìƒí•´.', keyword: 'ê·¸ë¦¬ì›€' },
    { name: 'ì»µ10', emoji: 'ğŸ¡', message: 'ê°€ì¡±ê³¼ í‰í™”ë¡œìš´ ì‹œê°„ì„ ê°€ì ¸. í–‰ë³µì´ ê°€ë“í•´.', keyword: 'í–‰ë³µ' },
    // ì™„ë“œ
    { name: 'ì—ì´ìŠ¤ ì˜¤ë¸Œ ì™„ë“œ', emoji: 'ğŸ”¥', message: 'ì—´ì •ì´ í­ë°œí•´. í•˜ê³  ì‹¶ì€ ê±° ë°”ë¡œ ì‹œì‘í•´.', keyword: 'ì—´ì •' },
    { name: 'ì™„ë“œ3', emoji: 'ğŸš€', message: 'í™•ì¥ì˜ ì‹œê¸°ì•¼. ë” í° ê·¸ë¦¼ì„ ê·¸ë ¤ë´.', keyword: 'í™•ì¥' },
    { name: 'ì™„ë“œ8', emoji: 'âš¡', message: 'ë¹ ë¥¸ ì§„ì „ì´ ìˆì–´. ì†ë„ë¥¼ ëŠ¦ì¶”ì§€ ë§ˆ.', keyword: 'ì†ë„' },
    // ì†Œë“œ
    { name: 'ì—ì´ìŠ¤ ì˜¤ë¸Œ ì†Œë“œ', emoji: 'ğŸ—¡ï¸', message: 'ëª…í™•í•œ ë‹µì„ ì°¾ì•„. ì§„ì‹¤ì´ ë³´ì—¬.', keyword: 'ëª…í™•' },
    { name: 'ì†Œë“œ2', emoji: 'ğŸ¤”', message: 'ê²°ì •ì„ ë¯¸ë£¨ì§€ ë§ˆ. ì„ íƒì˜ ì‹œê°„ì´ì•¼.', keyword: 'ê²°ì •' },
    { name: 'ì†Œë“œ6', emoji: 'â›µ', message: 'í˜ë“  ì‹œê¸°ë¥¼ ë²—ì–´ë‚˜. í‰ì˜¨ì´ ì°¾ì•„ì™€.', keyword: 'í‰ì˜¨' },
    // íœíƒ€í´
    { name: 'ì—ì´ìŠ¤ ì˜¤ë¸Œ íœíƒ€í´', emoji: 'ğŸ’°', message: 'ì¬ë¬¼ìš´ì´ ìƒìŠ¹í•´. ê¸°íšŒë¥¼ ì¡ì•„.', keyword: 'ì¬ë¬¼' },
    { name: 'íœíƒ€í´3', emoji: 'ğŸ—ï¸', message: 'í˜‘ë ¥ì´ ì„±ê³µì„ ë§Œë“¤ì–´. íŒ€ì›Œí¬ë¥¼ ë°œíœ˜í•´.', keyword: 'í˜‘ë ¥' },
    { name: 'íœíƒ€í´9', emoji: 'ğŸŒŸ', message: 'ë…¸ë ¥í•œ ë§Œí¼ ê²°ì‹¤ì„ ë§ºì–´. ë³´ìƒì´ ì™€.', keyword: 'ê²°ì‹¤' },
    { name: 'íœíƒ€í´10', emoji: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', message: 'ì•ˆì •ê³¼ í’ìš”ê°€ ì°¾ì•„ì™€. ê°€ì¡±ê³¼ í•¨ê»˜í•´.', keyword: 'ì•ˆì •' }
  ];

  // A, B, C ì¹´ë“œ ëœë¤ ì„ íƒ
  const [cardA] = useState(tarotDeck[Math.floor(Math.random() * tarotDeck.length)]);
  const [cardB] = useState(tarotDeck[Math.floor(Math.random() * tarotDeck.length)]);
  const [cardC] = useState(tarotDeck[Math.floor(Math.random() * tarotDeck.length)]);

  const cards = { A: cardA, B: cardB, C: cardC };

  const handleCardSelect = (card) => {
    setSelectedCard(card);
    setShowResult(true);
  };

  const reset = () => {
    setSelectedCard(null);
    setShowResult(false);
    window.location.reload();
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 p-4 flex items-center justify-center">
      <div className="max-w-2xl w-full">
        {/* í—¤ë” */}
        <div className="text-center mb-8">
          <div className="flex justify-center items-center gap-2 mb-4">
            <Moon className="text-yellow-300" size={32} />
            <h1 className="text-4xl font-bold text-white">11ì›” ìš´ì„¸</h1>
            <Sun className="text-yellow-300" size={32} />
          </div>
          <p className="text-purple-200 text-lg">
            {showResult ? 'ìŠ¤ì¹˜ë‹ˆì˜ 11ì›” ìš´ì„¸ ì¹´ë“œ' : 'ë§ˆìŒìœ¼ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒí•´ë´'}
          </p>
        </div>

        {!showResult ? (
          /* ì¹´ë“œ ì„ íƒ í™”ë©´ */
          <div className="grid grid-cols-3 gap-6 mb-8">
            {['A', 'B', 'C'].map((letter) => (
              <button
                key={letter}
                onClick={() => handleCardSelect(letter)}
                className="group relative"
              >
                <div className="bg-gradient-to-br from-purple-600 to-indigo-600 rounded-2xl p-8 shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-purple-500/50 border-2 border-purple-400">
                  <div className="text-center">
                    <div className="text-6xl mb-4 group-hover:scale-110 transition-transform">
                      ğŸ´
                    </div>
                    <div className="text-4xl font-bold text-white">{letter}</div>
                  </div>
                </div>
              </button>
            ))}
          </div>
        ) : (
          /* ê²°ê³¼ í™”ë©´ */
          <div className="space-y-6 animate-fade-in">
            {/* ì„ íƒí•œ ì¹´ë“œ ê²°ê³¼ */}
            <div className="bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-purple-300/30">
              <div className="text-center mb-6">
                <div className="inline-block bg-purple-500 text-white px-6 py-2 rounded-full text-xl font-bold mb-4">
                  ì„ íƒ: {selectedCard}
                </div>
                <div className="text-7xl mb-4">{cards[selectedCard].emoji}</div>
                <h2 className="text-3xl font-bold text-white mb-2">
                  {cards[selectedCard].name}
                </h2>
                <div className="flex items-center justify-center gap-2 mb-4">
                  <Sparkles className="text-yellow-300" size={20} />
                  <span className="text-purple-200 text-lg">
                    í‚¤ì›Œë“œ: {cards[selectedCard].keyword}
                  </span>
                  <Sparkles className="text-yellow-300" size={20} />
                </div>
              </div>
              
              <div className="bg-white/5 rounded-2xl p-6 mb-6">
                <p className="text-white text-xl leading-relaxed text-center">
                  {cards[selectedCard].message}
                </p>
              </div>

              {/* CTA ì„¹ì…˜ */}
              <div className="bg-gradient-to-r from-pink-500/20 to-purple-500/20 rounded-2xl p-6 border border-pink-300/30">
                <p className="text-white text-center mb-4">
                  ì´ ë©”ì‹œì§€ê°€ ì™€ë‹¿ëŠ”ë‹¤ë©´ <span className="font-bold text-yellow-300">'{cards[selectedCard].keyword}'</span> ëŒ“ê¸€ ë‚¨ê²¨ë´.
                </p>
                <p className="text-purple-200 text-sm text-center">
                  ëŒ“ê¸€ ë‹¤ëŠ” ìˆœê°„, ìŠ¤ì¹˜ë‹ˆì˜ 11ì›” ìš´ì´ ì˜¬ë¼ê°€.
                </p>
              </div>
            </div>

            {/* ë‚˜ë¨¸ì§€ ì¹´ë“œ ê³µê°œ */}
            <div className="bg-white/5 backdrop-blur-lg rounded-2xl p-6">
              <h3 className="text-white text-center font-bold mb-4 text-lg">
                ğŸ’« ì„ íƒí•˜ì§€ ì•Šì€ ì¹´ë“œë“¤
              </h3>
              <div className="grid grid-cols-2 gap-4">
                {['A', 'B', 'C'].filter(l => l !== selectedCard).map((letter) => (
                  <div key={letter} className="bg-white/10 rounded-xl p-4 text-center">
                    <div className="text-2xl mb-2">{cards[letter].emoji}</div>
                    <div className="text-white font-bold mb-1">{letter}: {cards[letter].name}</div>
                    <div className="text-purple-200 text-sm">{cards[letter].keyword}</div>
                  </div>
                ))}
              </div>
            </div>

            {/* ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ */}
            <button
              onClick={reset}
              className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-xl font-bold text-lg hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg"
            >
              ğŸ”„ ë‹¤ì‹œ ì„ íƒí•˜ê¸°
            </button>
          </div>
        )}

        {/* ë¬´ë£Œ íƒ€ë¡œ ì•ˆë‚´ (í•­ìƒ í‘œì‹œ) */}
        <div className="mt-8 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-lg rounded-2xl p-6 border border-yellow-300/30">
          <div className="text-center">
            <Heart className="inline-block text-pink-400 mb-3" size={28} />
            <p className="text-white font-bold text-lg mb-3">
              11ì›” ìš´ì„¸ë¥¼ ë” ìì„¸íˆ ì•Œê³  ì‹¶ì€ ìŠ¤ì¹˜ë‹ˆëŠ” ë¬´ë£Œíƒ€ë¡œ ì´ë²¤íŠ¸ ì‹ ì²­í•´ë´!
            </p>
            <div className="bg-white/10 rounded-xl p-4 mb-4">
              <p className="text-purple-200 mb-2">âœ… ì´ ê¸€ ìŠ¤í•˜ë¦¬ í•´ì£¼ê³ </p>
              <p className="text-purple-200 mb-2">âœ… ì¹´ì¹´ì˜¤ì±„ë„ ì¹œì¶” í›„</p>
              <p className="text-purple-200">âœ… ì¸ì¦í•˜ë©´ ë¬´ë£Œíƒ€ë¡œ ì´ë²¤íŠ¸ ì°¸ì—¬ ê°€ëŠ¥í•´!</p>
            </div>
            <div className="bg-pink-500/30 rounded-lg p-3">
              <p className="text-white">ğŸ‘‰ ì¹´ì¹´ì˜¤ì±„ë„: [ë§í¬]</p>
            </div>
          </div>
        </div>
      </div>

      <style jsx>{`
        @keyframes fade-in {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fade-in {
          animation: fade-in 0.5s ease-out;
        }
      `}</style>
    </div>
  );
};

export default TarotFortune;
